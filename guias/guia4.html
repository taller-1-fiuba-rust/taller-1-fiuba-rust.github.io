<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Guía 4 - Taller de Programación I</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../inicio.html"><strong aria-hidden="true">1.</strong> Inicio</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../docentes/index.html"><strong aria-hidden="true">1.1.</strong> Docentes</a></li><li class="chapter-item expanded "><a href="../correlativas.html"><strong aria-hidden="true">1.2.</strong> Materias correlativas</a></li></ol></li><li class="chapter-item expanded "><a href="../recursos.html"><strong aria-hidden="true">2.</strong> Bibliografía y Recursos</a></li><li class="chapter-item expanded "><a href="../clases/index.html"><strong aria-hidden="true">3.</strong> Clases</a></li><li class="chapter-item expanded "><a href="../proyecto/22C1/proyecto.html"><strong aria-hidden="true">4.</strong> Proyecto 1C 2022: BitTorrent</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../proyecto/22C1/criterios_aprobacion.html"><strong aria-hidden="true">4.1.</strong> Criterios de aprobación</a></li></ol></li><li class="chapter-item expanded "><a href="../guias/index.html"><strong aria-hidden="true">5.</strong> Guías</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guias/guia1.html"><strong aria-hidden="true">5.1.</strong> Guía 1</a></li><li class="chapter-item expanded "><a href="../guias/guia2.html"><strong aria-hidden="true">5.2.</strong> Guía 2</a></li><li class="chapter-item expanded "><a href="../guias/guia3.html"><strong aria-hidden="true">5.3.</strong> Guía 3</a></li><li class="chapter-item expanded "><a href="../guias/guia4.html" class="active"><strong aria-hidden="true">5.4.</strong> Guía 4</a></li></ol></li><li class="chapter-item expanded "><a href="../proyecto/anteriores/index.html"><strong aria-hidden="true">6.</strong> Proyectos anteriores</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../proyecto/anteriores/21C1/proyecto.html"><strong aria-hidden="true">6.1.</strong> 1C 2021: Redis</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../proyecto/anteriores/21C1/agregado.html"><strong aria-hidden="true">6.1.1.</strong> Agregado al Proyecto</a></li></ol></li><li class="chapter-item expanded "><a href="../proyecto/anteriores/21C2/proyecto.html"><strong aria-hidden="true">6.2.</strong> 2C 2021: MQTT</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../proyecto/anteriores/21C2/finales_2022_feb_mar.html"><strong aria-hidden="true">6.2.1.</strong> Finales Febrero/Marzo 2022</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../rust_arg.html"><strong aria-hidden="true">7.</strong> Grupo Rust Argentina</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Taller de Programación I</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="guía-de-ejercicios-4-sockets-en-rust"><a class="header" href="#guía-de-ejercicios-4-sockets-en-rust">Guía de Ejercicios 4: Sockets en Rust</a></h1>
<p><a href="./guia4_sockets.pdf"><strong>Descargar en formato PDF</strong></a></p>
<h2 id="ejercicio-1---introducción"><a class="header" href="#ejercicio-1---introducción">Ejercicio 1 - Introducción</a></h2>
<h3 id="Ítem-a"><a class="header" href="#Ítem-a">Ítem A</a></h3>
<p>Escribir un programa tal que el hilo main crea un thread hijo que actuará como cliente, mientras el padre actúa como servidor. La comunicación se establece para enviar y recibir un saludo, por ejemplo: <strong>Hola hijo</strong> y <strong>Buen día Papá</strong>.</p>
<h3 id="Ítem-b"><a class="header" href="#Ítem-b">Ítem B</a></h3>
<p>Modificar el programa del ejercicio anterior para que el servidor pueda gestionar más de un cliente.</p>
<h2 id="ejercicio-2---mini-chat"><a class="header" href="#ejercicio-2---mini-chat">Ejercicio 2 - Mini Chat</a></h2>
<p>Implementar un programa para armar una sala de chat.</p>
<p>El programa inicia y le pide un <strong>nickname</strong> al usuario. Luego, abre un socket servidor ligado a un puerto configurable. A continuación, realiza <strong>broadcasting</strong> del nickname a la subred, para después quedar escuchando mensajes.</p>
<p>Si recibe un mensaje de broadcast con un nickname, lo agrega a la lista de usuarios de la sala de chat, junto a la dirección IP de quien se lo envía.</p>
<p>Si recibe otro mensaje, se lo imprime por pantalla.</p>
<p>Para recibir un mensaje del usuario, se debe leer de la estrada estándar (<strong>stdin</strong>). Si se lo antecede con el nickname de destino, se lo envía a ese destinatario en particular. Con <em>Enter</em>, se transmite el mensaje.</p>
<h2 id="ejercicio-3---ftp-honeypot"><a class="header" href="#ejercicio-3---ftp-honeypot">Ejercicio 3 - FTP Honeypot</a></h2>
<h3 id="introducción"><a class="header" href="#introducción">Introducción</a></h3>
<p>Un <em>honeypot</em> es una aplicación que simula ser un servidor de otra aplicación mayor, para que cuando un usuario malicioso se conecte, ataque este servidor falso, permitiendo tomar registro de las técnicas de ataque que se utilizan en la red.
En este trabajo práctico prototiparemos un honeypot de un servidor FTP.</p>
<h3 id="protocolo-ftp"><a class="header" href="#protocolo-ftp">Protocolo FTP</a></h3>
<p>El protocolo FTP es un <strong>protocolo de texto</strong>, formado por mensajes delimitados por un <strong>salto de línea</strong>.</p>
<p>Los comandos son palabras en su mayoría de 4 letras, seguidos de un espacio que los separa de sus argumentos. El servidor responde con un código numérico y un texto descriptivo.</p>
<h3 id="cliente-ftp"><a class="header" href="#cliente-ftp">Cliente FTP</a></h3>
<p>Los comandos que puede ejecutar el cliente son los siguientes</p>
<ul>
<li><code>USER &lt;username&gt;</code>: Envía un nombre de usuario para realizar login.</li>
<li><code>PASS &lt;password&gt;</code>: Envía un password para el usuario.</li>
<li><code>SYST</code>: Consulta información del sistema</li>
<li><code>LIST</code>: Consulta los archivos contenidos en el directorio actual</li>
<li><code>HELP</code>: Consulta los comandos disponibles</li>
<li><code>PWD</code>: Consulta el directorio actual</li>
<li><code>MKD</code>: Crea un directorio</li>
<li><code>RMD</code>: Elimina un directorio</li>
</ul>
<p>Para simplificar el trabajo práctico, la transferencia de datos se realizará respondiendo en el mismo puerto por el cual se conectan inicialmente los clientes.</p>
<p>Esto implica que los comandos <code>PASV</code> y <code>PORT</code> no serán necesarios para transmitir información (por ejemplo con el comando <code>LIST</code>).</p>
<h3 id="servidor-ftp"><a class="header" href="#servidor-ftp">Servidor FTP</a></h3>
<p>El servidor FTP responde con los siguientes mensajes:</p>
<ul>
<li>Cuando un cliente recién se conecta: <code>220 &lt;newClient&gt;</code></li>
<li>Cuando un cliente quiere operar sin haber hecho login: <code>530 &lt;clientNotLogged&gt;</code></li>
<li>Luego de que un cliente envía un comando <code>USER</code>: <code>331 &lt;passRequired&gt;</code></li>
<li>Si el usuario envía un comando que no es <code>PASS</code> luego de un comando <code>USER</code>: <code>530 &lt;clientNotLogged&gt;</code></li>
<li>Si el usuario realiza un login válido (el usuario enviado con <code>USER</code> y la contraseña enviada con <code>PASS</code> son válidas, es decir, concuerdan con las configuradas): <code>230 &lt;loginSuccess&gt;</code></li>
<li>Si el usuario realiza un login inválido: <code>530 &lt;loginFailed&gt;</code></li>
</ul>
<p>Una vez que el cliente realizó un login exitoso, se habilitan varios comandos al cliente:</p>
<ul>
<li>Si el usuario envía el comando <code>SYST</code>: <code>215 &lt;systemInfo&gt;</code></li>
<li>Si el usuario envía el comando <code>HELP</code>: <code>214 &lt;commands&gt;</code></li>
<li>Si el usuario envía el comando <code>LIST</code>, se realizará una respuesta en 3 partes</li>
</ul>
<p>La primera línea será <code>150 &lt;listBegin&gt;</code></p>
<p>Luego enviará una línea por cada directorio cargado, con el siguiente formato:</p>
<pre><code>drwxrwxrwx 0 1000 1000 4096 Sep 24 12:34 &lt;nombre directorio&gt;
</code></pre>
<p>Los directorios serán listados en orden alfabético.</p>
<p>Luego de enviar las líneas, enviará <code>226 &lt;listEnd&gt;</code>.</p>
<ul>
<li>Si el usuario envía el comando <code>PWD</code>: <code>257 &lt;currentDirectoryMsg&gt;</code></li>
<li>Si el usuario envía el comando <code>MKD &lt;nombreDir&gt;</code>, intenta agregar ```<nombreDir>`'' a la lista de directorios existentes responde:
<ul>
<li><code>257 &quot;&lt;nombreDir&gt; &lt;mkdSuccess&gt;&quot;</code> en caso de que el directorio no existía.</li>
<li><code>550 &lt;mkdFailed&gt;</code> si ya existía</li>
</ul>
</li>
<li>Si el usuario envía el comando <code>RMD &lt;nombreDir&gt;</code> intenta remover <code>&quot;&lt;nombreDir&gt;&quot;</code> de la lista de directorios y responde:
<ul>
<li><code>250 &lt;rmdSuccess&gt;</code> si el directorio existe.</li>
<li><code>550 &lt;rmdFailed&gt;</code> si no existía.</li>
</ul>
</li>
<li>Finalmente, el usuario puede pedirle al servidor que termine la conexión enviando la palabra <code>QUIT</code>. En tal caso el servidor responde con <code>221 &lt;quitSuccess&gt;</code> y ambos cierran sus conexiones ordenadamente.</li>
</ul>
<p>Cabe destacar que la entrada de comandos puede no terminar con <code>QUIT</code>, debiendo el cliente cerrar su conexión al llegar al final del stream y el servidor liberar sus recursos adecuadamente.</p>
<h3 id="configuración-de-mensajes"><a class="header" href="#configuración-de-mensajes">Configuración de mensajes</a></h3>
<p>El servidor FTP lee un archivo de configuración las siguientes variables</p>
<ul>
<li><code>user</code>: Usuario para realizar login</li>
<li><code>password</code>: Password para realizar login</li>
<li><code>newClient</code>: Mensaje enviado a un cliente recién conectado</li>
<li><code>clientNotLogged</code>: Mensaje enviado a un cliente que quiere operar sin haber hecho login</li>
<li><code>passRequired</code>: Mensaje de solicitud de password</li>
<li><code>loginSuccess</code>: Mensaje de password aceptado</li>
<li><code>loginFailed</code>: Mensaje de password rechazado</li>
<li><code>systemInfo</code>: Mensaje de información del sistema</li>
<li><code>commands</code>: Mensaje con los comandos disponibles</li>
<li><code>unknownCommand</code>: Mensaje de comando inválido</li>
<li><code>quit</code>: Mensaje de desconexión del usuario</li>
</ul>
<p>El archivo de configuración posee un formato ```clave=valor`'', y debe ser cargado al iniciar la aplicación. No se validará que se encuentren todas las claves necesarias, en caso de faltar una clave necesaria, es a decisión del desarrollador cómo contemplar este caso.</p>
<h3 id="formato-de-línea-de-comandos"><a class="header" href="#formato-de-línea-de-comandos">Formato de Línea de Comandos</a></h3>
<h4 id="servidor"><a class="header" href="#servidor">Servidor</a></h4>
<pre><code class="language-bash">./server &lt;puerto/servicio&gt; &lt;configuracion&gt;
</code></pre>
<p>Donde <code>&lt;puerto/servicio&gt;</code> es el puerto TCP (o servicio) en donde estará escuchando la conexiones entrantes, <code>&lt;configuracion&gt;</code> el archivo con las variables del servidor.</p>
<h4 id="cliente"><a class="header" href="#cliente">Cliente</a></h4>
<p>El cliente se ejecuta utilizando el siguiente formato de línea de comandos</p>
<pre><code class="language-bash">./client &lt;ip/hostname&gt; &lt;puerto/servicio&gt;
</code></pre>
<p>El cliente se conectará al servidor corriendo en la máquina con dirección IP <code>&lt;ip&gt;</code> (o <code>&lt;hostname&gt;</code>), en el puerto (o servicio) TCP <code>&lt;puerto/servicio&gt;</code>.</p>
<h2 id="requerimientos-no-funcionales"><a class="header" href="#requerimientos-no-funcionales">Requerimientos no funcionales</a></h2>
<p>Los siguientes son los requerimientos no funcionales para la resolución de los ejercicios:</p>
<ul>
<li>El proyecto deberá ser desarrollado en lenguaje Rust, usando las herramientas de la biblioteca estándar.</li>
<li>No se permite utilizar <strong>crates</strong> externos. El único crate autorizado a ser utilizado es <a href="https://crates.io/crates/rand">rand</a> en caso de que se quiera generar valores aleatorios.</li>
<li>El código fuente debe compilarse en la versión stable del compilador y no se permite utilizar bloques unsafe.</li>
<li>El código deberá funcionar en ambiente Unix / Linux.</li>
<li>El programa deberá ejecutarse en la línea de comandos.</li>
<li>La compilación no debe arrojar <strong>warnings</strong> del compilador, ni del linter <strong>clippy</strong>.</li>
<li>Las funciones y los tipos de datos (<strong>struct</strong>) deben estar documentadas siguiendo el estándar de <strong>cargo doc</strong>.</li>
<li>El código debe formatearse utilizando <strong>cargo fmt</strong>.</li>
<li>Las funciones no deben tener una extensión mayor a 30 líneas. Si se requiriera una extensión mayor, se deberá particionarla en varias funciones.</li>
<li>Cada tipo de dato implementado debe ser colocado en una unidad de compilación (archivo fuente) independiente.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guias/guia3.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../proyecto/anteriores/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guias/guia3.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../proyecto/anteriores/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
